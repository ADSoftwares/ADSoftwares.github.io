{"version":3,"sources":["webpack:///src/app/pages/dynamic-menu/dynamic-menu.component.html","webpack:///src/app/pages/dynamic-menu/dynamic-menu.component.ts","webpack:///src/app/pages/dynamic-menu/dynamic-menu.service.ts","webpack:///src/app/pages/dynamic-menu/dynamic-menu.module.ts"],"names":["DynamicMenuComponent","appSettings","formBuilder","snackBar","menuService","dynamicMenuService","icons","settings","menuItems","getVerticalMenuItems","form","group","compose","required","minLength","valueChanges","pipe","subscribe","menu","routerLink","controls","setValue","disable","clearValidators","enable","setValidators","updateValueAndValidity","href","valid","addNewMenuItem","open","duration","reset","hasSubMenu","parentId","selector","template","providers","animations","host","DynamicMenuService","componentFactoryResolver","applicationRef","injector","component","menuItem","lastId","length","id","newMenuItem","parseInt","push","item","filter","componentRef","resolveComponentFactory","create","attachView","hostView","instance","menuParentId","elem","rootNodes","verticalMenu","document","getElementById","replaceChild","children","routes","path","pathMatch","DynamicMenuModule","imports","forChild","declarations"],"mappings":"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","file":"pages-dynamic-menu-dynamic-menu-module-es5.js","sourcesContent":["export default \"<div fxLayout=\\\"row wrap\\\" fxLayoutAlign=\\\"center\\\">\\r\\n    <div fxFlex=\\\"100\\\" fxFlex.gt-sm=\\\"50\\\" fxFlex.sm=\\\"60\\\" class=\\\"flex-p\\\">\\r\\n        <mat-card class=\\\"list\\\">\\r\\n            <mat-card-content>\\r\\n                <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit(form.value)\\\">      \\r\\n                    <mat-form-field class=\\\"w-100\\\">\\r\\n                        <input matInput placeholder=\\\"Title\\\" formControlName=\\\"title\\\">\\r\\n                        <mat-error *ngIf=\\\"form.controls.title.errors?.required\\\">Menu title is required</mat-error>\\r\\n                        <mat-error *ngIf=\\\"form.controls.title.hasError('minlength')\\\">Menu title isn't long enough, minimum of 3 characters</mat-error>\\r\\n                    </mat-form-field> \\r\\n                    <mat-form-field class=\\\"w-100\\\">\\r\\n                        <mat-select placeholder=\\\"Icon\\\" formControlName=\\\"icon\\\">\\r\\n                            <mat-option *ngFor=\\\"let icon of icons\\\" [value]=\\\"icon\\\">\\r\\n                                <mat-icon>{{ icon }}</mat-icon>\\r\\n                            </mat-option>\\r\\n                        </mat-select>\\r\\n                    </mat-form-field>\\r\\n                    <mat-form-field class=\\\"w-100\\\" >\\r\\n                        <input matInput placeholder=\\\"RouterLink\\\" formControlName=\\\"routerLink\\\" matTooltip=\\\"e.g. /dashboard\\\" matTooltipPosition=\\\"after\\\">\\r\\n                        <mat-error *ngIf=\\\"form.controls.routerLink.errors?.required\\\">Routerlink or href is required</mat-error>\\r\\n                    </mat-form-field>\\r\\n                    <mat-checkbox formControlName=\\\"hasSubMenu\\\">Has sub menu</mat-checkbox>\\r\\n                    <mat-form-field class=\\\"w-100\\\" >\\r\\n                        <input matInput placeholder=\\\"Href\\\" formControlName=\\\"href\\\" matTooltip=\\\"e.g. http://themeseason.com\\\" matTooltipPosition=\\\"after\\\">\\r\\n                        <mat-error *ngIf=\\\"form.controls.href.errors?.required\\\">Href or routerlink is required</mat-error>\\r\\n                    </mat-form-field>\\r\\n                    <mat-radio-group formControlName=\\\"target\\\">\\r\\n                        <mat-radio-button value=\\\"_blank\\\">_blank</mat-radio-button>\\r\\n                        <mat-radio-button value=\\\"_self\\\" class=\\\"mx-1\\\">_self</mat-radio-button>\\r\\n                    </mat-radio-group>\\r\\n                    <mat-form-field class=\\\"w-100\\\">\\r\\n                        <mat-select placeholder=\\\"Parent menu\\\" formControlName=\\\"parentId\\\">\\r\\n                            <mat-option value=\\\"0\\\">-- Select Parent Menu --</mat-option>\\r\\n                            <mat-option *ngFor=\\\"let menuItem of menuItems\\\" [value]=\\\"menuItem.id\\\">\\r\\n                                {{menuItem.title}}\\r\\n                            </mat-option>\\r\\n                        </mat-select>\\r\\n                    </mat-form-field>\\r\\n                    <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"center\\\">\\r\\n                        <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!form.valid\\\" type=\\\"submit\\\">Add New Menu Item</button>\\r\\n                    </div>\\r\\n                </form>\\r\\n            </mat-card-content>\\r\\n        </mat-card>\\r\\n      </div> \\r\\n</div> \";","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators} from '@angular/forms';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { Menu } from '../../theme/components/menu/menu.model';\r\nimport { MenuService } from '../../theme/components/menu/menu.service';\r\nimport { DynamicMenuService } from './dynamic-menu.service';\r\nimport { AppSettings } from '../../app.settings';\r\nimport { Settings } from '../../app.settings.model';\r\nimport { VerticalMenuComponent } from '../../theme/components/menu/vertical-menu/vertical-menu.component';\r\nimport { listTransition } from '../../theme/utils/app-animation';\r\n\r\n@Component({\r\n  selector: 'app-dynamic-menu',\r\n  templateUrl: './dynamic-menu.component.html',\r\n  providers: [ DynamicMenuService, MenuService ],\r\n  animations: [ listTransition ],\r\n  host: {\r\n    '[@listTransition]': ''\r\n  }\r\n})\r\nexport class DynamicMenuComponent implements OnInit {\r\n  public settings: Settings;\r\n  public menuItems:Array<Menu>;\r\n  public icons = ['home','person', 'card_travel', 'delete', 'event', 'favorite', 'help' ]\r\n  public form:FormGroup;\r\n  constructor(public appSettings:AppSettings, \r\n              public formBuilder: FormBuilder, \r\n              public snackBar: MatSnackBar,\r\n              private menuService:MenuService,\r\n              private dynamicMenuService:DynamicMenuService) {\r\n    this.settings = this.appSettings.settings; \r\n    this.menuItems = this.menuService.getVerticalMenuItems();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = this.formBuilder.group({\r\n      'title': ['', Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'icon': null,\r\n      'routerLink': ['', Validators.required],    \r\n      'href': ['', Validators.required],            \r\n      'target': null,\r\n      'hasSubMenu': false,\r\n      'parentId': 0\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.form.valueChanges.pipe(debounceTime(500)).subscribe((menu:Menu) => {  \r\n      if(menu.routerLink && menu.routerLink != ''){\r\n        this.form.controls['href'].setValue(null);\r\n        this.form.controls['href'].disable();\r\n        this.form.controls['href'].clearValidators();\r\n        this.form.controls['target'].setValue(null);\r\n        this.form.controls['target'].disable();\r\n      }\r\n      else{\r\n        this.form.controls['href'].enable();\r\n        this.form.controls['href'].setValidators([Validators.required]);\r\n        this.form.controls['target'].enable();\r\n      }\r\n      this.form.controls['href'].updateValueAndValidity();\r\n\r\n      if(menu.href && menu.href != ''){\r\n        this.form.controls['routerLink'].setValue(null);\r\n        this.form.controls['routerLink'].disable();\r\n        this.form.controls['routerLink'].clearValidators();\r\n        this.form.controls['hasSubMenu'].setValue(false);\r\n        this.form.controls['hasSubMenu'].disable();\r\n      }\r\n      else{\r\n        this.form.controls['routerLink'].enable();\r\n        this.form.controls['routerLink'].setValidators([Validators.required]);\r\n        this.form.controls['hasSubMenu'].enable();\r\n      }\r\n      this.form.controls['routerLink'].updateValueAndValidity();\r\n    })\r\n  }\r\n\r\n  onSubmit(menu:Menu):void {\r\n    if (this.form.valid) {\r\n      this.dynamicMenuService.addNewMenuItem(VerticalMenuComponent, this.menuItems, menu);\r\n      this.snackBar.open('New menu item added successfully!', null, {\r\n        duration: 2000,\r\n      });\r\n      this.form.reset({\r\n        hasSubMenu:false,\r\n        parentId:0\r\n      });     \r\n    }\r\n  } \r\n\r\n}","import { Injectable, Injector, ComponentFactoryResolver, ApplicationRef, EmbeddedViewRef } from '@angular/core';\r\nimport { VerticalMenuComponent } from '../../theme/components/menu/vertical-menu/vertical-menu.component';\r\nimport { Menu } from '../../theme/components/menu/menu.model';\r\n\r\n@Injectable()\r\nexport class DynamicMenuService {\r\n\r\n    constructor(private componentFactoryResolver: ComponentFactoryResolver,\r\n                private applicationRef: ApplicationRef,\r\n                private injector: Injector) { }     \r\n    \r\n    addNewMenuItem(component: any, menuItems:Array<Menu>, menuItem) {\r\n\r\n        const lastId = menuItems[menuItems.length-1].id;\r\n        const newMenuItem = new Menu(lastId+1, menuItem['title'], menuItem['routerLink'], menuItem['href'], menuItem['icon'], menuItem['target'], menuItem['hasSubMenu'], parseInt(menuItem['parentId']));\r\n                \r\n        menuItems.push(newMenuItem);\r\n        let item = menuItems.filter(item=>item.id == newMenuItem.parentId)[0];\r\n        if(item) item.hasSubMenu = true;  \r\n\r\n        const componentRef = this.componentFactoryResolver\r\n            .resolveComponentFactory(component)\r\n            .create(this.injector);        \r\n        \r\n        this.applicationRef.attachView(componentRef.hostView);\r\n        \r\n        let instance = <VerticalMenuComponent>componentRef.instance;\r\n        instance.menuItems = menuItems;\r\n        instance.menuParentId = 0;\r\n\r\n        const elem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\r\n                \r\n        const verticalMenu = document.getElementById('vertical-menu');        \r\n        verticalMenu.replaceChild(elem, verticalMenu.children[0]);  \r\n        \r\n    } \r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { DynamicMenuComponent } from './dynamic-menu.component';\r\n\r\nexport const routes = [\r\n  { path: '', component: DynamicMenuComponent, pathMatch: 'full' }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule, \r\n    ReactiveFormsModule,\r\n    RouterModule.forChild(routes),\r\n    SharedModule\r\n  ],\r\n  declarations: [\r\n    DynamicMenuComponent\r\n  ]\r\n})\r\nexport class DynamicMenuModule { }"]}